{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../app/onboarding/page.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\n\r\nconst backend = process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:8001\";\r\n\r\ntype Account = {\r\n  id: number;\r\n  login: string;\r\n  type: string;\r\n  avatar_url?: string;\r\n};\r\n\r\ntype OrgResponse = {\r\n  account: Account;\r\n  orgs: Account[];\r\n  install_url: string;\r\n};\r\n\r\nexport default function OnboardingPage() {\r\n  const [data, setData] = useState<OrgResponse | null>(null);\r\n  const [status, setStatus] = useState(\"Loading organizations...\");\r\n  const [selected, setSelected] = useState<number | null>(null);\r\n\r\n  const token = useMemo(() => {\r\n    if (typeof window === \"undefined\") return \"\";\r\n    return localStorage.getItem(\"tp_token\") || \"\";\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!token) {\r\n      setStatus(\"Missing auth token. Please login again.\");\r\n      return;\r\n    }\r\n\r\n    fetch(`${backend}/api/orgs`, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((payload: OrgResponse) => {\r\n        setData(payload);\r\n        setSelected(payload?.account?.id || null);\r\n        setStatus(\"Ready\");\r\n      })\r\n      .catch(() => setStatus(\"Failed to load organizations\"));\r\n  }, [token]);\r\n\r\n  const installLink = () => {\r\n    if (!selected) return \"#\";\r\n    const url = new URL(`${backend}/auth/install`);\r\n    url.searchParams.set(\"target_id\", String(selected));\r\n    return url.toString();\r\n  };\r\n\r\n  return (\r\n    <main className=\"container\">\r\n      <div className=\"header\">\r\n        <div>\r\n          <h2>Select an organization</h2>\r\n          <p className=\"muted\">\r\n            Choose where to install the GitHub App. You can include all repos or\r\n            select specific ones on the next step.\r\n          </p>\r\n        </div>\r\n        <a className=\"button secondary\" href=\"/dashboard\">\r\n          Skip\r\n        </a>\r\n      </div>\r\n\r\n      <div className=\"card\" style={{ marginBottom: 24 }}>\r\n        <strong>Status:</strong> {status}\r\n      </div>\r\n\r\n      <div className=\"card\" style={{ marginBottom: 24 }}>\r\n        <h3>Available Organizations</h3>\r\n        <div className=\"grid\" style={{ marginTop: 16 }}>\r\n          {data?.account && (\r\n            <label className=\"repo\" style={{ cursor: \"pointer\" }}>\r\n              <div style={{ display: \"flex\", gap: 12, alignItems: \"center\" }}>\r\n                <input\r\n                  type=\"radio\"\r\n                  checked={selected === data.account.id}\r\n                  onChange={() => setSelected(data.account.id)}\r\n                />\r\n                <div>\r\n                  <div style={{ fontWeight: 600 }}>{data.account.login}</div>\r\n                  <div className=\"muted\" style={{ fontSize: 13 }}>\r\n                    Personal account\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </label>\r\n          )}\r\n          {data?.orgs?.map((org) => (\r\n            <label key={org.id} className=\"repo\" style={{ cursor: \"pointer\" }}>\r\n              <div style={{ display: \"flex\", gap: 12, alignItems: \"center\" }}>\r\n                <input\r\n                  type=\"radio\"\r\n                  checked={selected === org.id}\r\n                  onChange={() => setSelected(org.id)}\r\n                />\r\n                <div>\r\n                  <div style={{ fontWeight: 600 }}>{org.login}</div>\r\n                  <div className=\"muted\" style={{ fontSize: 13 }}>\r\n                    Organization\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </label>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ display: \"flex\", gap: 16 }}>\r\n        <a className=\"button\" href={installLink()} target=\"_blank\">\r\n          Install & Authorize\r\n        </a>\r\n        <a className=\"button secondary\" href=\"/\">\r\n          Back to Home\r\n        </a>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"0NA0BQG,EAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,iCC1BjCF,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEC,eAAe,+BCFxCP,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEE,KAAK,0CCA9B,EAAA,EAAA,CAAA,CAAA,OAEA,IAAM,EAAU,QAAQ,GAAG,CAAC,uBAAuB,EAAI,wBAexC,SAAS,IACtB,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,MAC/C,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,4BAC/B,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAElD,EAAQ,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IACsB,GAEzC,EAAE,QAEL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,AAAK,EAKL,EALI,GAAQ,CAKN,CAAA,EAAG,EAAQ,SAAS,CAAC,CAAE,CAC3B,QAAS,CAAE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAO,AAAC,CAC9C,GACG,IAAI,CAAC,AAAC,GAAQ,EAAI,IAAI,IACtB,IAAI,CAAC,AAAC,IACL,EAAQ,GACR,EAAY,GAAS,SAAS,IAAM,MACpC,EAAU,QACZ,GACC,KAAK,CAAC,IAAM,EAAU,iCAbvB,EAAU,0CAcd,EAAG,CAAC,EAAM,EAUR,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sBACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,2BACJ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iBAAQ,mHAKvB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAmB,KAAK,sBAAa,YAKpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,OAAO,MAAO,CAAE,aAAc,EAAG,YAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,YAAgB,IAAE,KAG5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,OAAO,MAAO,CAAE,aAAc,EAAG,YAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,4BACJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,OAAO,MAAO,CAAE,UAAW,EAAG,YAC1C,GAAM,SACL,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,OAAO,MAAO,CAAE,OAAQ,SAAU,WACjD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,GAAI,WAAY,QAAS,YAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,QACL,QAAS,IAAa,EAAK,OAAO,CAAC,EAAE,CACrC,SAAU,IAAM,EAAY,EAAK,OAAO,CAAC,EAAE,IAE7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,WAAY,GAAI,WAAI,EAAK,OAAO,CAAC,KAAK,GACpD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,QAAQ,MAAO,CAAE,SAAU,EAAG,WAAG,6BAOvD,GAAM,MAAM,IAAI,AAAC,GAChB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAmB,UAAU,OAAO,MAAO,CAAE,OAAQ,SAAU,WAC9D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,GAAI,WAAY,QAAS,YAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,QACL,QAAS,IAAa,EAAI,EAAE,CAC5B,SAAU,IAAM,EAAY,EAAI,EAAE,IAEpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,WAAY,GAAI,WAAI,EAAI,KAAK,GAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,QAAQ,MAAO,CAAE,SAAU,EAAG,WAAG,wBAT1C,EAAI,EAAE,SAmBxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,EAAG,YACrC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,SAAS,KAAM,CAnEd,KAClB,GAAI,CAAC,EAAU,MAAO,IACtB,IAAM,EAAM,IAAI,IAAI,CAAA,EAAG,EAAQ,aAAa,CAAC,EAE7C,OADA,EAAI,YAAY,CAAC,GAAG,CAAC,YAAa,OAAO,IAClC,EAAI,QAAQ,EACrB,KA8DiD,OAAO,kBAAS,wBAG3D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAmB,KAAK,aAAI,sBAMjD","ignoreList":[0,1,2]}