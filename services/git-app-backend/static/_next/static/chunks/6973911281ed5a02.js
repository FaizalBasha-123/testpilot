(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23143,e=>{"use strict";var s=e.i(47167),t=e.i(43476),a=e.i(71645);let i=s.default.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8001";function n(){let[e,s]=(0,a.useState)(null),[n,l]=(0,a.useState)("Loading organizations..."),[r,c]=(0,a.useState)(null),o=(0,a.useMemo)(()=>localStorage.getItem("tp_token")||"",[]);return(0,a.useEffect)(()=>{o?fetch(`${i}/api/orgs`,{headers:{Authorization:`Bearer ${o}`}}).then(e=>e.json()).then(e=>{s(e),c(e?.account?.id||null),l("Ready")}).catch(()=>l("Failed to load organizations")):l("Missing auth token. Please login again.")},[o]),(0,t.jsxs)("main",{className:"container",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Select an organization"}),(0,t.jsx)("p",{className:"muted",children:"Choose where to install the GitHub App. You can include all repos or select specific ones on the next step."})]}),(0,t.jsx)("a",{className:"button secondary",href:"/dashboard",children:"Skip"})]}),(0,t.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,t.jsx)("strong",{children:"Status:"})," ",n]}),(0,t.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,t.jsx)("h3",{children:"Available Organizations"}),(0,t.jsxs)("div",{className:"grid",style:{marginTop:16},children:[e?.account&&(0,t.jsx)("label",{className:"repo",style:{cursor:"pointer"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,t.jsx)("input",{type:"radio",checked:r===e.account.id,onChange:()=>c(e.account.id)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontWeight:600},children:e.account.login}),(0,t.jsx)("div",{className:"muted",style:{fontSize:13},children:"Personal account"})]})]})}),e?.orgs?.map(e=>(0,t.jsx)("label",{className:"repo",style:{cursor:"pointer"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,t.jsx)("input",{type:"radio",checked:r===e.id,onChange:()=>c(e.id)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontWeight:600},children:e.login}),(0,t.jsx)("div",{className:"muted",style:{fontSize:13},children:"Organization"})]})]})},e.id))]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,t.jsx)("a",{className:"button",href:(()=>{if(!e?.install_url||!r)return"#";let s=new URL(e.install_url);return s.searchParams.set("target_id",String(r)),s.toString()})(),target:"_blank",children:"Install & Authorize"}),(0,t.jsx)("a",{className:"button secondary",href:"/",children:"Back to Home"})]})]})}e.s(["default",()=>n])}]);